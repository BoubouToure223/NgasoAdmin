<div class="container">
  <!-- Header -->
  <header class="header">
    <h1 class="title">Gestion des projets</h1>
    <p class="subtitle">Suivre l'avancement des projets de construction sur N'gaSo</p>
  </header>

  <!-- Search and Actions Bar -->
  <div class="controls-bar">
    <div class="search-container">
      <svg class="search-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M9 17C13.4183 17 17 13.4183 17 9C17 4.58172 13.4183 1 9 1C4.58172 1 1 4.58172 1 9C1 13.4183 4.58172 17 9 17Z" stroke="#999999" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M19 19L14.65 14.65" stroke="#999999" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <input 
        type="text" 
        class="search-input" 
        placeholder="Rechercher un projet..."
        [(ngModel)]="searchText"
        (input)="onSearch()"
      />
    </div>

    <div class="action-buttons">
      <button class="btn-outline" (click)="onFilter()">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M14 2H2L6.66667 7.56V12.3333L9.33333 14V7.56L14 2Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Filtrer
      </button>
      <button class="btn-outline" (click)="onExport()">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M14 10V12.6667C14 13.0203 13.8595 13.3594 13.6095 13.6095C13.3594 13.8595 13.0203 14 12.6667 14H3.33333C2.97971 14 2.64057 13.8595 2.39052 13.6095C2.14048 13.3594 2 13.0203 2 12.6667V10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M4.66667 6.66667L8 10L11.3333 6.66667" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M8 10V2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Exporter
      </button>
    </div>
  </div>

  <!-- Table -->
  <div class="table-container">
    <table class="table">
      <thead>
        <tr>
          <th>Nom</th>
          <th>Propriétaire</th>
          <th>Localisation</th>
          <th>Budget</th>
          <th>Étape</th>
          <th>Progression</th>
          <th>Création<th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let project of filteredProjects">
          <td class="project-name">{{ project.nom }}</td>
          <td>{{ project.proprietaire }}</td>
          <td>{{ project.localisation }}</td>
          <td>{{ project.budget }}</td>
          <td>
            <span class="etape-badge" [ngClass]="getEtapeClass(project.etape)">
              {{ project.etape }}
            </span>
          </td>
          <td>
            <div class="progress-container">
              <div class="progress-bar">
                <div class="progress-fill" [style.width.%]="project.progression"></div>
              </div>
              <span class="progress-text">{{ project.progression }}%</span>
            </div>
          </td>
          <td>{{ project.miseAJour }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div class="pagination">
    <div class="pagination-buttons">
      <button
        class="pagination-btn"
        [disabled]="page === 0"
        (click)="goToPage(page - 1)"
      >
        Précédent
      </button>
      <button
        class="pagination-btn"
        *ngFor="let _ of [].constructor(totalPages); let idx = index"
        [class.active]="page === idx"
        [attr.aria-current]="page === idx ? 'page' : null"
        (click)="goToPage(idx)"
      >
        {{ idx + 1 }}
      </button>
      <button
        class="pagination-btn"
        [disabled]="page + 1 >= totalPages"
        (click)="goToPage(page + 1)"
      >
        Suivant
      </button>
    </div>
  </div>
</div>
