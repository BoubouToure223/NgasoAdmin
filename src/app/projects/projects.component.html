<div class="container">
  <!-- Header -->
  <header class="header">
    <h1 class="title">Gestion des projets</h1>
    <p class="subtitle">Suivre l'avancement des projets de construction sur N'gaSo</p>
  </header>

  <!-- Search and Actions Bar -->
  <div class="controls-bar">
    <div class="search-container">
      <svg class="search-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M9 17C13.4183 17 17 13.4183 17 9C17 4.58172 13.4183 1 9 1C4.58172 1 1 4.58172 1 9C1 13.4183 4.58172 17 9 17Z" stroke="#999999" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M19 19L14.65 14.65" stroke="#999999" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <input 
        type="text" 
        class="search-input" 
        placeholder="Rechercher un projet..."
        [(ngModel)]="searchText"
        (input)="onSearch()"
      />
    </div>

    <div class="action-buttons">
      <button class="btn-outline" (click)="onFilter()">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M14 2H2L6.66667 7.56V12.3333L9.33333 14V7.56L14 2Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Filtrer
      </button>
      <button class="btn-outline" (click)="onExport()">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M14 10V12.6667C14 13.0203 13.8595 13.3594 13.6095 13.6095C13.3594 13.8595 13.0203 14 12.6667 14H3.33333C2.97971 14 2.64057 13.8595 2.39052 13.6095C2.14048 13.3594 2 13.0203 2 12.6667V10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M4.66667 6.66667L8 10L11.3333 6.66667" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M8 10V2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Exporter
      </button>
    </div>
  </div>

  <!-- Table -->
  <div class="table-container">
    <table class="table">
      <thead>
        <tr>
          <th>Nom</th>
          <th>Propriétaire</th>
          <th>Localisation</th>
          <th>Budget</th>
          <th>Étape</th>
          <th>Progression</th>
          <th>Mise à jour</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let project of filteredProjects">
          <td class="project-name">{{ project.nom }}</td>
          <td>{{ project.proprietaire }}</td>
          <td>{{ project.localisation }}</td>
          <td>{{ project.budget }}</td>
          <td>
            <span class="etape-badge" [ngClass]="getEtapeClass(project.etape)">
              {{ project.etape }}
            </span>
          </td>
          <td>
            <div class="progress-container">
              <div class="progress-bar">
                <div class="progress-fill" [style.width.%]="project.progression"></div>
              </div>
              <span class="progress-text">{{ project.progression }}%</span>
            </div>
          </td>
          <td>{{ project.miseAJour }}</td>
          <td>
            <div class="action-icons">
              <button class="icon-btn" (click)="onEdit(project)" title="Modifier">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M7.33333 2.66667H2.66667C2.31304 2.66667 1.97391 2.80714 1.72386 3.05719C1.47381 3.30724 1.33333 3.64638 1.33333 4V13.3333C1.33333 13.687 1.47381 14.0261 1.72386 14.2761C1.97391 14.5262 2.31304 14.6667 2.66667 14.6667H12C12.3536 14.6667 12.6928 14.5262 12.9428 14.2761C13.1929 14.0261 13.3333 13.687 13.3333 13.3333V8.66667" stroke="#666666" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M12.3333 1.66665C12.5986 1.40144 12.9583 1.25244 13.3333 1.25244C13.7084 1.25244 14.0681 1.40144 14.3333 1.66665C14.5985 1.93187 14.7475 2.29158 14.7475 2.66665C14.7475 3.04173 14.5985 3.40144 14.3333 3.66665L8 9.99999L5.33333 10.6667L6 7.99999L12.3333 1.66665Z" stroke="#666666" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </button>
              <button class="icon-btn" (click)="onDelete(project)" title="Supprimer">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M2 4H3.33333H14" stroke="#666666" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M5.33333 4V2.66667C5.33333 2.31304 5.47381 1.97391 5.72386 1.72386C5.97391 1.47381 6.31304 1.33333 6.66667 1.33333H9.33333C9.68696 1.33333 10.0261 1.47381 10.2761 1.72386C10.5262 1.97391 10.6667 2.31304 10.6667 2.66667V4M12.6667 4V13.3333C12.6667 13.687 12.5262 14.0261 12.2761 14.2761C12.0261 14.5262 11.687 14.6667 11.3333 14.6667H4.66667C4.31304 14.6667 3.97391 14.5262 3.72386 14.2761C3.47381 14.0261 3.33333 13.687 3.33333 13.3333V4H12.6667Z" stroke="#666666" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div class="pagination">
    <span class="pagination-info">
      Affichage de
      <span class="font-medium">{{ page * size + 1 }}</span>
      à
      <span class="font-medium">{{ page * size + filteredProjects.length }}</span>
      sur
      <span class="font-medium">{{ total }}</span>
      résultats
    </span>
    <div class="pagination-buttons">
      <button
        class="pagination-btn"
        [disabled]="page === 0"
        (click)="goToPage(page - 1)"
      >
        Précédent
      </button>
      <button
        class="pagination-btn"
        [class.active]="page === i"
        *ngFor="let i of [].constructor(totalPages); let idx = index"
        (click)="goToPage(idx)"
      >
        {{ idx + 1 }}
      </button>
      <button
        class="pagination-btn"
        [disabled]="page + 1 >= totalPages"
        (click)="goToPage(page + 1)"
      >
        Suivant
      </button>
    </div>
  </div>
</div>
